<!DOCTYPE html><html>    <head>        <!-- 页面meta -->        <meta charset="utf-8">        <meta http-equiv="X-UA-Compatible" content="IE=edge">        <title>分类管理</title>        <meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport">        <!-- 引入样式 -->        <link rel="stylesheet" href="css/style.css">        <link rel="stylesheet" href="element-ui/lib/theme-chalk/index.css">        <script src="js/vue.js"></script>        <script src="element-ui/lib/index.js"></script>        <script src="js/axios-0.18.0.js"></script>    </head>    <style>    </style>    <body class="hold-transition">        <div id="app">            <div class="app-container">                <div class="box">                    <!--搜索框-->                    <div class="filter-container">                        <el-input placeholder="分类名称" v-model="pagination.name" style="width: 200px;" class="filter-item"></el-input>                        <el-button @click="search()" class="dalfBut">查询</el-button>                        <el-button type="primary" class="butT" @click="handleCreate()">新建</el-button>                    </div>                    <!--表格-->                    <el-table size="small" current-row-key="id" :data="dataList" stripe highlight-current-row>                        <el-table-column type="index" align="center" label="序号"></el-table-column>                        <el-table-column prop="name" label="分类名称" align="center"></el-table-column>                        <el-table-column prop="description" label="描述" align="center"></el-table-column>                        <el-table-column label="操作" align="center">                            <template slot-scope="scope">                                <el-button type="primary" size="mini" @click="handleUpdate(scope.row)">编辑</el-button>                                <el-button type="danger" size="mini" @click="handleDelete(scope.row)">删除</el-button>                            </template>                        </el-table-column>                    </el-table>                    <!--分页条-->                    <el-pagination                            @size-change="handleSizeChange"                            @current-change="handleCurrentChange"                            :current-page="pagination.currentPage"                            :page-sizes="[5, 10, 50, 100]"                            :page-size="pagination.pageSize"                            layout="total, sizes, prev, pager, next, jumper"                            :total="pagination.total">                    </el-pagination>                    <!-- 新增标签弹层 -->                    <div class="add-form">                        <el-dialog title="新增分类" :visible.sync="dialogFormVisible">                            <el-form ref="dataAddForm" :model="formData" :rules="rules" label-position="right" label-width="100px">                                <el-row>                                    <el-col :span="12">                                        <el-form-item label="分类名称" prop="name">                                            <el-input v-model="formData.name"/>                                        </el-form-item>                                    </el-col>                                </el-row>                                <el-row>                                    <el-col :span="24">                                        <el-form-item label="描述">                                            <el-input v-model="formData.description" type="textarea"></el-input>                                        </el-form-item>                                    </el-col>                                </el-row>                            </el-form>                            <div slot="footer" class="dialog-footer">                                <el-button @click="dialogFormVisible = false">取消</el-button>                                <el-button type="primary" @click="handleAdd()">确定</el-button>                            </div>                        </el-dialog>                    </div>                    <!-- 编辑标签弹层 -->                    <div class="add-form">                        <el-dialog title="编辑检查项" :visible.sync="dialogFormVisible4Edit">                            <el-form ref="dataEditForm" :model="formData" :rules="rules" label-position="right" label-width="100px">                                <el-row>                                    <el-col :span="12">                                        <el-form-item label="分类名称" prop="name">                                            <el-input v-model="formData.name"/>                                        </el-form-item>                                    </el-col>                                </el-row>                                <el-row>                                    <el-col :span="24">                                        <el-form-item label="描述">                                            <el-input v-model="formData.description" type="textarea"></el-input>                                        </el-form-item>                                    </el-col>                                </el-row>                            </el-form>                            <div slot="footer" class="dialog-footer">                                <el-button @click="dialogFormVisible4Edit = false">取消</el-button>                                <el-button type="primary" @click="handleEdit()">确定</el-button>                            </div>                        </el-dialog>                    </div>                </div>            </div>        </div>    </body>    <script>        var vue = new Vue({            el: '#app',            data:{                // 分页条数据                pagination: {                    total: 0, // 总记录数                    pageSize: 5, // 每页显示条目数                    currentPage: 1, // 当前页码  10                    name: "" // 图书名称                },				dataList: [],//当前页要展示的列表数据                formData: {},//表单数据                dialogFormVisible: false,//控制表单是否可见                dialogFormVisible4Edit:false,//编辑表单是否可见                rules: {//校验规则                    // type: [{ required: true, message: '图书类别为必填项', trigger: 'blur' }],                    name: [{ required: true, message: '图书名称为必填项', trigger: 'blur' }]                }            },            //钩子函数，VUE对象初始化完成后自动执行            created() {                this.getPage();            },            methods: {                // 分页查询                getPage() {                    // 向后台发送异步请求                    axios                        .post("http://localhost:81/category/page", this.pagination)                        .then(response => {                            // total赋值给Vue的分页模型数据中的total属性                            this.pagination.total = response.data.data.total;                            // list赋值给Vue模型数据中的tableData属性                            this.dataList = response.data.data.records;                        })                },                // 搜索                search(){                    this.pagination.currentPage = 1;                    this.getPage();                },                //弹出添加窗口                handleCreate() {                    // 重置表单                    this.formData = {};                    // 弹出窗口                    this.dialogFormVisible = true;                },                //重置表单                resetForm() {                },                //添加                handleAdd () {                    // 进行表单校验                    this.$refs.dataAddForm.validate(valid=>{                        if (valid){                            // 校验通过，向后台发送异步请求                            axios({                                // 请求方式                                method:"POST",                                // 请求路径                                url:"http://localhost:81/category",                                // 请求参数                                data:this.formData                            }).then(response=>{                                if (response.data.code == 1){                                    // 添加成功,调用查询方法                                    this.getPage();                                    // 给出提示                                    this.$message.success("添加成功");                                    // 关闭添加弹框                                    this.dialogFormVisible = false;                                }else {                                    // 添加失败                                    this.$message.error(response.data.msg);                                }                            })                        } else {                            // 校验失败，给出提示                            this.$message.error("请检查输入项！")                        }                    })                },                //弹出编辑窗口                handleUpdate(row) {                    // 显示编辑弹框                    this.dialogFormVisible4Edit = true;                    // 向后台发送请求，重新查询当前行的数据用于回显                    axios.get("http://localhost:81/category/"+row.id)                        .then(response=>{                            if (response.data.code == 1){                                this.formData = response.data.data;                            }else {                                this.$message.error(response.data.msg);                            }                        })                },                //编辑                handleEdit() {                    // 表单检验                    this.$refs.dataEditForm.validate(valid=>{                        if (valid){                            // 发送异步请求                            axios.put("http://localhost:81/category",this.formData)                                .then(response=>{                                    if (response.data.code == 1){                                        // 给出提示                                        this.$message.success("修改成功");                                        // 关闭弹框                                        this.dialogFormVisible4Edit = false;                                        // 重新调用查询方法                                        this.getPage();                                    }                                })                        }else {                            this.$message.error("请检查输入项！");                        }                    })                },                // 删除                handleDelete(row) {                    this.$confirm("此操作将永久删除当前数据，是否确认？","提示",{                        type: 'warning'                    }).then(()=>{                        axios.delete("http://localhost:81/category/"+row.id)                            .then(response=>{                                if (response.data.code == 1){                                    // 给出提示                                    this.$message.success("删除成功");                                    // 重新查询                                    this.getPage();                                } else {                                    this.$message.error(response.data.msg);                                }                            })                    })                },                // 每页显示条目数变化后触发的函数                handleSizeChange(pageSize) {                    // 修改模型数据中的值                    this.pagination.pageSize = pageSize;                    this.getPage();                },                // 当前页码变化后触发的函数                handleCurrentChange(currentPage) {                    // 修改模型数据                    this.pagination.currentPage = currentPage;                    this.getPage();                },            }        })    </script></html>